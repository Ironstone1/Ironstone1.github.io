<!DOCTYPE html>
<html lang="en-GB">
	<head>
		<title>Build a computer - part chooser</title>
		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" ></meta>
		<meta name="description" content="Build a computer, choose your parts" ></meta>
		<meta name="keywords" content="PC,Computer,PartPicker" ></meta>
		<meta name="author" content="Jared" ></meta>
		<meta name="robots" content="index, follow" ></meta>
		<meta name="referrer" content="default" ></meta>
		<meta name="" content="" ></meta>
	</head>
	
	<script>
		function getData(fileName, criteria) {
			var request = new XMLHttpRequest();
			request.onreadystatechange = function() {
				var response = request.responseText.split("\n");
				if (response == "") {return;}
				
				var tbody = document.createElement("tbody");
				document.getElementById("dataTable").innerHTML = "";
				document.getElementById("dataTable").data = fileName;
				var CPU_list = [];
				
				//create table head
				thead = document.createElement("thead");
				thead.innerHTML = "<th>+</th><th>" + response[0].replace(/,/g, "</th><th>") + "</th>";
				document.getElementById("dataTable").appendChild(thead);
				
				for (i=1;i<response.length;i++) {
					// check if item meets criteria.
					if (criteria == "all") {
						CPU_list.push(response[i].split(","));
					} else if (criteria == "") {
						document.getElementById("NoSearchResults").innerHTML = "No search Results!";
						return;
					} else {
						if (response[i].toLocaleLowerCase().indexOf(criteria.toLocaleLowerCase()) != -1) {
							CPU_list.push(response[i].split(","));
						}
					}
				}
					
				for (count=0;count<CPU_list.length;count++) {
					// add to part list button
					var tr = document.createElement("tr");
					selectBttn = document.createElement("input");
					selectBttn.type = "button";
					selectBttn.onclick = function() {Add2PartList(count);}; // problem
					selectBttn.value = "+";
					tr.appendChild(selectBttn)
					
					// create new table row, add item to document
					for (index=0;index < CPU_list[i].length; index++) {
						td = document.createElement("td");
						td.innerHTML = CPU_list[i][index];
						tr.appendChild(td);
					} tbody.appendChild(tr);
				} document.getElementById("dataTable").appendChild(tbody);
			}
			request.open("GET", fileName);
			request.send();
		}
		
		function AddCustomPart() {
		}
		
		function Add2PartList(ItemIndex) {
			NameIndex = document.getElementById("dataTable").children[0].children[0].innerHTML.split("</th><th>").indexOf("Name");
			Name =		document.getElementById("dataTable").children[1].children[ItemIndex].children[NameIndex].innerHTML;
			if (confirm("Are you sure you want to add '" + Name + "' to your part list?\npress OK to continue or cancel to decline!") == true) {
				document.getElementById("cpu-elm").outerHTML = Name;
			}
		}
		
			//("<thead><th>" + response[0].replace(",", "</th><th>") + "</th></thead>");
			
			//compatibility, which mobo fits which cpu, etc.
		
			/*//form
			// Enter the part name.
			// Drop down list (Select type) - CPU, GPU, RAM, etc...
			
			//JS fetch:
			//Part			$("tbody[id='category_content'] tr td[class='tdname'] a")[0].innerHTML
			//Clock speed	$("tbody[id='category_content'] td[style='text-align:left;']")[0].innerHTML
			//Cores			$("tbody[id='category_content'] td[style='text-align:center;']")[0].innerHTML
			//https://pcpartpicker.com/products/cpu/
			
			// CASE, CPU cooler?*/
		
		/*function get() {		
			var elm = "";
			for (i=0;i<$("tbody[id='category_content'] tr").length;i++) {
				//part 	= $("tbody[id='category_content'] tr td[class='tdname'] a")[i].innerHTML;
				//clock 	= $("tbody[id='category_content'] td[style='text-align:left;']")[i].innerHTML;
				//cores	= $("tbody[id='category_content'] td[style='text-align:center;']")[i].innerHTML;
				
				i1 = $("tbody[id='category_content'] tr")[i].children[1].children[0].innerHTML;
				i2 = $("tbody[id='category_content'] tr")[i].children[2].innerHTML;
				i3 = $("tbody[id='category_content'] tr")[i].children[3].innerHTML;
				i4 = $("tbody[id='category_content'] tr")[i].children[4].innerHTML;
				i5 = $("tbody[id='category_content'] tr")[i].children[5].innerHTML;
				i6 = $("tbody[id='category_content'] tr")[i].children[6].innerHTML;
				
				
				//elm += "\n<tr>\n\t<td>" + part + "</td>\n\t<td>" + clock + "</td>\n\t<td>" + cores + "</td>\n</tr>";
				//elm += part + "," + clock + "," + cores + "\n";
				elm += i1 + "," + i2 + "," + i3 + "," + i4 + "," + i5 + "\n";
			}
			console.log(elm);
		}*/
		
	</script>
	
	<style>
		.select_button {
			background-color: green;
			color: white;
		}
		
		.select_head {
			font-family: arial black;
		}
		
		.table_head {
			font-family: arial;
		}
		
		.main_head {
			font-family: Arial;
			text-decoration: underline;
		}
		
	</style>
	
	<body>
		<h1 class="main_head">Computer Part List</h1>
		
		<table border="1px solid black" width="100%" id="select_table">
			<thead>
				<tr>
					<th class="table_head">Part</th>
					<th class="table_head">Select</th>
				</tr>
			</thead>
			
			<tbody>
				<tr>
					<td class="select_head">CPU</td>
					<td><button class="select_button" id="cpu-elm" onclick="getData('cpu.txt','all')">Select a Processor</button></td>
				</tr>
				<tr>
					<td class="select_head">MOBO</td>
					<td><button class="select_button" id="mobo-elm" onclick="getData('mobo.txt','all')">Select a Motherboard</button></td>
				</tr>
				<tr>
					<td class="select_head">RAM</td>
					<td><button class="select_button" id="ram-elm" onclick="getData('ram.txt','all')">Select a RAM kit</button></td>
				</tr>
				<tr>
					<td class="select_head">GPU</td>
					<td><button class="select_button" id="gpu-elm" onclick="getData('gpu.txt','all')">Select a Graphics Card</button></td>
				</tr>
				<tr>
					<td class="select_head">HDD</td>
					<td><button class="select_button" id="hdd-elm" onclick="getData('hdd.txt','all')">Select a Hard Disk Drive</button></td>
				</tr>
				<tr>
					<td class="select_head">SSD</td>
					<td><button class="select_button" id="ssd-elm" onclick="getData('ssd.txt','all')">Select a Solid State Drive</button></td>
				</tr>
				<tr>
					<td class="select_head">PSU</td>
					<td><button class="select_button" id="psu-elm" onclick="getData('psu.txt','all')">Select a Power Supply Unit</button></td>
				</tr>
				<tr>
					<td class="select_head">Custom</td>
					<td><button class="select_button" id="custom-elm" onclick="AddCustomPart()">Add a custom part</button></td>
				</tr>
			</tbody>
		</table>
		
		<div>
			<input type="text" name="search" placeholder="Search for a part" id="search4part"></input>
			<input type="button" name="search" value="Search" onclick="getData(document.getElementById('dataTable').data, document.getElementById('search4part').value) "></input>
			
			<div id="tableContainer">
				<table border="1px solid black" width="100%" id="dataTable">
				</table>
				<p id="NoSearchResults"></p>
			</div>
		</div>
		
	</body>
</html>